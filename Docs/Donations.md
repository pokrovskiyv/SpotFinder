# –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ–Ω–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ Telegram Stars

## –û–±–∑–æ—Ä

SpotFinder –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–æ–Ω–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ **Telegram Stars** - –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –≤–∞–ª—é—Ç—É Telegram –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –±–æ—Ç–æ–≤.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É `/donate` –∏–ª–∏ –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –±–æ—Ç–∞"
2. –ë–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å—É–º–º: 50, 100, 500 Stars –∏–ª–∏ –∫–∞—Å—Ç–æ–º–Ω–∞—è —Å—É–º–º–∞
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Å—É–º–º—É –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø–ª–∞—Ç–µ–∂
4. Telegram –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂
5. –ë–æ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–æ–Ω–∞—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ –±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
6. Stars –∑–∞—á–∏—Å–ª—è—é—Ç—Å—è –Ω–∞ —Å—á–µ—Ç –±–æ—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

## –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

–í—Å–µ –¥–æ–Ω–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `donations`:
- `donation_id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–æ–Ω–∞—Ç–∞
- `user_id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `amount_stars` - —Å—É–º–º–∞ –≤ Stars
- `telegram_payment_charge_id` - ID –ø–ª–∞—Ç–µ–∂–∞ Telegram (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- `status` - —Å—Ç–∞—Ç—É—Å (completed, pending, refunded)
- `created_at` - –¥–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ `telegram_payment_charge_id`
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Å—É–º–º—ã (1-2500 Stars)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ `pre-checkout-query`

## –í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤

Stars –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ —Å—á–µ—Ç—É –±–æ—Ç–∞ –≤ Telegram. –î–ª—è –≤—ã–≤–æ–¥–∞:

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ [Fragment.com](https://fragment.com)
2. –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ —Å–≤–æ–π Telegram –∞–∫–∫–∞—É–Ω—Ç
3. –ü—Ä–∏–≤—è–∑–∞—Ç—å —Å–ø–æ—Å–æ–± –≤—ã–≤–æ–¥–∞ (–±–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞ –∏–ª–∏ –∫—Ä–∏–ø—Ç–æ–∫–æ—à–µ–ª–µ–∫)
4. –í—ã–≤–µ—Å—Ç–∏ —Å—Ä–µ–¥—Å—Ç–≤–∞ (–º–∏–Ω–∏–º—É–º ~1000 Stars)

–ö–æ–º–∏—Å—Å–∏—è Telegram: ~30%

## –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –§–∞–π–ª—ã

- `supabase/migrations/007_create_donations_table.sql` - –º–∏–≥—Ä–∞—Ü–∏—è –ë–î
- `supabase/functions/_shared/donation-manager.ts` - –º–µ–Ω–µ–¥–∂–µ—Ä –¥–æ–Ω–∞—Ç–æ–≤
- `supabase/functions/_shared/orchestrator.ts` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥—ã –∏ –ø–ª–∞—Ç–µ–∂–µ–π
- `supabase/functions/_shared/telegram-client.ts` - –º–µ—Ç–æ–¥—ã –¥–ª—è –∏–Ω–≤–æ–π—Å–æ–≤
- `supabase/functions/_shared/types.ts` - —Ç–∏–ø—ã –¥–ª—è –ø–ª–∞—Ç–µ–∂–µ–π
- `supabase/functions/_shared/constants.ts` - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–æ–Ω–∞—Ç–æ–≤
- `supabase/functions/_shared/telegram-formatter.ts` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π

### –ö–æ–º–∞–Ω–¥—ã

- `/donate` - –ø–æ–∫–∞–∑–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–æ–Ω–∞—Ç–æ–≤

### –ö–Ω–æ–ø–∫–∏

- ‚≠ê 50 Stars
- ‚≠ê 100 Stars
- ‚≠ê 500 Stars
- üíé –°–≤–æ—è —Å—É–º–º–∞ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)

## –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase
supabase db push

# –ò–ª–∏ —á–µ—Ä–µ–∑ SQL Editor –≤ Supabase Dashboard
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ 007_create_donations_table.sql
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞

```bash
# –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É /donate –≤ –º–µ–Ω—é –±–æ—Ç–∞
./scripts/setup-telegram-commands.sh
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/donate` –±–æ—Ç—É
2. –í—ã–±–µ—Ä–∏—Ç–µ —Å—É–º–º—É –∏–∑ –∫–Ω–æ–ø–æ–∫
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–ª–∞—Ç–µ–∂ –≤ Telegram
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏—à–ª–æ –±–ª–∞–≥–æ–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—É `donations` –≤ –ë–î

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

–ú–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–æ–Ω–∞—Ç–æ–≤ —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥—ã `DonationManager`:
- `getUserDonations(userId)` - –≤—Å–µ –¥–æ–Ω–∞—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `getTotalDonations(userId)` - –æ–±—â–∞—è —Å—É–º–º–∞ –¥–æ–Ω–∞—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è


