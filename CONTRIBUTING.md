# ü§ù Contributing to SpotFinder Bot

–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–Ω—Ç–µ—Ä–µ—Å –∫ –ø—Ä–æ–µ–∫—Ç—É! –õ—é–±—ã–µ –∫–æ–Ω—Ç—Ä–∏–±—É—Ü–∏–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è.

## –ö–∞–∫ –Ω–∞—á–∞—Ç—å

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π feature branch (`git checkout -b feature/amazing-feature`)
3. –°–¥–µ–ª–∞–π –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. Commit –∏–∑–º–µ–Ω–µ–Ω–∏—è (`git commit -m 'Add amazing feature'`)
5. Push –≤ branch (`git push origin feature/amazing-feature`)
6. –û—Ç–∫—Ä–æ–π Pull Request

## –¢–∏–ø—ã –∫–æ–Ω—Ç—Ä–∏–±—É—Ü–∏–π

### üêõ –ë–∞–≥-—Ä–µ–ø–æ—Ä—Ç—ã

–û—Ç–∫—Ä–æ–π issue —Å:
- –û–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
- –®–∞–≥–∞–º–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- –û–∂–∏–¥–∞–µ–º—ã–º vs. —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
- –õ–æ–≥–∞–º–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- –í–µ—Ä—Å–∏–µ–π/–æ–∫—Ä—É–∂–µ–Ω–∏–µ–º

### ‚ú® Feature requests

–ü—Ä–µ–¥–ª–æ–∂–∏ –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é:
- –û–ø–∏—à–∏ use case
- –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ?
- –ö–∞–∫ —ç—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å?
- –ï—Å—Ç—å –ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã?

### üíª Code contributions

#### –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

**High Priority:**
- [ ] Unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- [ ] –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è Gemini
- [ ] –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ geo-hash

**Medium Priority:**
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–æ–≤
- [ ] Webhook –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è feedback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] Dashboard –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- [ ] A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤

**Low Priority:**
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–∏—Å–∫–∞
- [ ] –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞–º–∏

## –°—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞

### TypeScript Style Guide

```typescript
// ‚úÖ Good
export class SessionManager {
  private supabase: SupabaseClient;

  constructor(url: string, key: string) {
    this.supabase = createClient(url, key);
  }

  async getSession(userId: number): Promise<Session | null> {
    // Clear intent, typed return
    const { data, error } = await this.supabase
      .from('sessions')
      .select('*')
      .eq('user_id', userId)
      .single();

    if (error) return null;
    return data as Session;
  }
}

// ‚ùå Bad
export class sessionmanager {
  private db: any;

  async get(id) {
    // Unclear types, any usage
    let x = await this.db.from('sessions').select().eq('user_id', id);
    return x.data;
  }
}
```

### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞

1. **–ò–º–µ–Ω–æ–≤–∞–Ω–∏–µ:**
   - Classes: `PascalCase`
   - Functions: `camelCase`
   - Constants: `UPPER_SNAKE_CASE`
   - Files: `kebab-case.ts`

2. **Types:**
   - –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π —Ç–∏–ø—ã –¥–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
   - –ò–∑–±–µ–≥–∞–π `any` - –∏—Å–ø–æ–ª—å–∑—É–π `unknown` –µ—Å–ª–∏ —Ç–∏–ø –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω
   - –°–æ–∑–¥–∞–≤–∞–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤

3. **Async/Await:**
   - –ò—Å–ø–æ–ª—å–∑—É–π async/await –≤–º–µ—Å—Ç–æ `.then()`
   - –í—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π –æ—à–∏–±–∫–∏ —Å try/catch

4. **–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:**
   - JSDoc –¥–ª—è –≤—Å–µ—Ö public –º–µ—Ç–æ–¥–æ–≤
   - Inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
   - –ù–∞ —Ä—É—Å—Å–∫–æ–º –∏–ª–∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º (–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ)

### –ü—Ä–∏–º–µ—Ä —Ö–æ—Ä–æ—à–µ–≥–æ –∫–æ–¥–∞

```typescript
/**
 * Calculate distance between two geographic points
 * @param point1 First location
 * @param point2 Second location
 * @returns Distance in meters
 */
export function calculateDistance(
  point1: Location,
  point2: Location
): number {
  const R = 6371000; // Earth's radius in meters
  
  // Convert to radians
  const œÜ1 = (point1.lat * Math.PI) / 180;
  const œÜ2 = (point2.lat * Math.PI) / 180;
  const ŒîœÜ = ((point2.lat - point1.lat) * Math.PI) / 180;
  const ŒîŒª = ((point2.lon - point1.lon) * Math.PI) / 180;

  // Haversine formula
  const a =
    Math.sin(ŒîœÜ / 2) * Math.sin(ŒîœÜ / 2) +
    Math.cos(œÜ1) * Math.cos(œÜ2) * Math.sin(ŒîŒª / 2) * Math.sin(ŒîŒª / 2);
  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

  return R * c;
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º PR

1. **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   ```bash
   # –ó–∞–ø—É—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–æ
   supabase start
   supabase functions serve telegram-webhook --env-file .env.local
   
   # –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
   - /start
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
   - –ü–æ–∏—Å–∫ –º–µ—Å—Ç
   - –£—Ç–æ—á–Ω—è—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã
   ```

2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞:**
   ```bash
   # Type checking
   deno check supabase/functions/**/*.ts
   
   # Formatting
   deno fmt supabase/functions/
   ```

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π:**
   ```bash
   # –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏–ª –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
   supabase db reset
   # –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ –≤—Å–µ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
   ```

### –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

–ï—Å–ª–∏ –¥–æ–±–∞–≤–ª—è–µ—à—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –¥–æ–±–∞–≤—å —Ç–µ—Å—Ç—ã:

```typescript
// supabase/functions/_shared/utils.test.ts
import { assertEquals } from 'https://deno.land/std@0.168.0/testing/asserts.ts';
import { extractOrdinal } from './utils.ts';

Deno.test("extractOrdinal extracts Russian ordinals", () => {
  assertEquals(extractOrdinal("–ø–µ—Ä–≤—ã–π"), 1);
  assertEquals(extractOrdinal("—É –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞"), 2);
  assertEquals(extractOrdinal("—Ç—Ä–µ—Ç—å–µ –∫–∞—Ñ–µ"), 3);
});

Deno.test("extractOrdinal returns null for invalid input", () => {
  assertEquals(extractOrdinal("–Ω–µ—Ç —á–∏—Å–ª–∞ —Ç—É—Ç"), null);
});
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Pull Request

### –•–æ—Ä–æ—à–∏–π PR –≤–∫–ª—é—á–∞–µ—Ç:

1. **–û–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫:**
   - ‚úÖ `feat: Add caching for popular search queries`
   - ‚úÖ `fix: Handle expired location correctly`
   - ‚ùå `Update code`
   - ‚ùå `Fix bug`

2. **–û–ø–∏—Å–∞–Ω–∏–µ:**
   ```markdown
   ## What
   Adds caching for search queries using geo-hash grouping
   
   ## Why
   Reduces API calls to Google Maps by 40% for popular locations
   
   ## How
   - Implemented geo-hash algorithm in utils.ts
   - Added cache lookup before API call in gemini-client.ts
   - Added TTL of 24 hours for cache entries
   
   ## Testing
   - Tested with 100 identical queries
   - Verified cache hit rate in logs
   - Manual testing in production
   
   ## Screenshots (if applicable)
   [Before/After performance metrics]
   ```

3. **–ß–∏—Å—Ç–∞—è –∏—Å—Ç–æ—Ä–∏—è –∫–æ–º–º–∏—Ç–æ–≤:**
   - Squash –º–µ–ª–∫–∏–µ commits ("fix typo", "oops")
   - –ö–∞–∂–¥—ã–π commit –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∞—Ç–æ–º–∞—Ä–Ω—ã–º
   - –ò—Å–ø–æ–ª—å–∑—É–π conventional commits:
     - `feat:` - –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è
     - `fix:` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–∞
     - `docs:` - –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
     - `refactor:` - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
     - `test:` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
     - `chore:` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Ç.–ø.

4. **–°–≤—è–∑–∞–Ω–Ω—ã–µ issues:**
   ```markdown
   Closes #42
   Relates to #38
   ```

## Code Review Process

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
   - Type checking –ø—Ä–æ—Ö–æ–¥–∏—Ç
   - –ù–µ—Ç –æ—á–µ–≤–∏–¥–Ω—ã—Ö security issues
   - –ö–æ–¥ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω

2. **–†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
   - –ö–æ–¥ —á–∏—Ç–∞–±–µ–ª–µ–Ω –∏ –ø–æ–Ω—è—Ç–µ–Ω
   - –°–ª–µ–¥—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞
   - –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞
   - –ï—Å—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏

3. **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
   - –§–∏—á–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–æ
   - –ù–µ—Ç —Ä–µ–≥—Ä–µ—Å—Å–∏–π –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
   - Edge cases –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å

–°–æ–∑–¥–∞–≤–∞–π –Ω–æ–≤—ã–π —Ñ–∞–π–ª –≤ `_shared/` –µ—Å–ª–∏:
- –õ–æ–≥–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
- –ú–æ–¥—É–ª—å –∏–º–µ–µ—Ç —á–µ—Ç–∫—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å
- –ö–æ–¥ –ø—Ä–µ–≤—ã—à–∞–µ—Ç ~200 —Å—Ç—Ä–æ–∫

### –ö–æ–≥–¥–∞ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π

–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –µ—Å–ª–∏:
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ç–µ–∫—É—â–µ–π –ª–æ–≥–∏–∫–æ–π
- –ù–µ –Ω–∞—Ä—É—à–∞–µ—Ç single responsibility
- –£–ª—É—á—à–∞–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥

### Dependency injection

```typescript
// ‚úÖ Good - dependencies injected
class Orchestrator {
  constructor(
    private sessionManager: SessionManager,
    private geminiClient: GeminiClient
  ) {}
}

// ‚ùå Bad - hard-coded dependencies
class Orchestrator {
  private sessionManager = new SessionManager();
  private geminiClient = new GeminiClient();
}
```

## –†–µ–ª–∏–∑–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

### –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (SemVer)

- **MAJOR** (1.0.0): Breaking changes
- **MINOR** (0.1.0): New features, backward compatible
- **PATCH** (0.0.1): Bug fixes

### Changelog

–û–±–Ω–æ–≤–ª—è–π `CHANGELOG.md` –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ–ª–∏–∑–µ:

```markdown
## [1.1.0] - 2024-01-15

### Added
- Caching for popular searches
- Support for multiple languages

### Fixed
- Location expiry not working correctly
- Gemini API rate limiting

### Changed
- Improved prompt engineering for better intent understanding
```

## –í–æ–ø—Ä–æ—Å—ã?

- üìß Email: [maintainer-email]
- üí¨ Telegram: [@username]
- üìù GitHub Discussions: [link]

## –õ–∏—Ü–µ–Ω–∑–∏—è

–í–Ω–æ—Å—è –≤–∫–ª–∞–¥, –≤—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à –∫–æ–¥ –±—É–¥–µ—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ MIT License.

---

**–°–ø–∞—Å–∏–±–æ –∑–∞ –≤–∫–ª–∞–¥ –≤ SpotFinder! üéâ**

